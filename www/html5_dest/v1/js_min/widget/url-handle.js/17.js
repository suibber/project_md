define(function(require,exports){function getParams(url){if(""==url)return{};for(var name,value,i,options={},paramsStart=url.indexOf("?")+1,paramsEnd=-1==url.indexOf("#")?url.length:url.indexOf("#"),str=url.slice(paramsStart,paramsEnd),arrtmp=str.split("&"),i=0,len=arrtmp.length;len>i;i++){var paramCount=arrtmp[i].indexOf("=");if(paramCount>0){name=arrtmp[i].substring(0,paramCount),value=arrtmp[i].substr(paramCount+1);try{value.indexOf("+")>-1&&(value=value.replace(/\+/g," ")),options[name]=decodeURIComponent(value)}catch(exp){}}}return delete options.frm,options}function http_build_query(formdata,numeric_prefix,arg_separator){var value,key,tmp=[],_http_build_query_helper=function(key,val,arg_separator){var k,tmp=[];if(val===!0?val="1":val===!1&&(val="0"),null!=val){if("object"==typeof val){for(k in val)null!=val[k]&&tmp.push(_http_build_query_helper(key+"["+k+"]",val[k],arg_separator));return tmp.join(arg_separator)}if("function"!=typeof val)return encodeURIComponent(key)+"="+encodeURIComponent(val);throw new Error("There was an error processing for http_build_query().")}return""};arg_separator||(arg_separator="&");for(key in formdata){value=formdata[key],numeric_prefix&&!isNaN(key)&&(key=String(numeric_prefix)+key);var query=_http_build_query_helper(key,value,arg_separator);""!==query&&tmp.push(query)}return tmp.join(arg_separator)}exports.http_build_query=http_build_query,exports.getParams=getParams});
define(function(require,exports){function getUid(wrapper){if(wrapper==window)return 0;var wrapperId=wrapper.getAttribute("id")||wrapper.getAttribute("uuid");return wrapperId||(wrapperId=++__id,wrapper.setAttribute("uuid",wrapperId)),wrapperId}function getScrollTop(container){return container?container.scrollTop:doc.scrollTop+doc1.scrollTop}function initScrollWatch(cid,container){var wrapper=container||window;_inited.hasOwnProperty(cid)||(_inited[cid]=!0,wrapper.onscroll=function(){var nowPos=getScrollTop(container);_direction=nowPos-_lastPos>0,_lastPos=nowPos,execBinded(cid),0===cid&&execList(_direction)})}function execList(goforward){var list,reserv_list,fntag;goforward?(list=forwardList,reserv_list=backwardList,fntag="gteFn"):(list=backwardList,reserv_list=forwardList,fntag="ltFn");for(var list_size=list.length,i=list_size-1;i>=0;i--){var event=list[i];if(event){var y=event.y;event.dynamicY&&(y=y()),!goforward^_lastPos>=y&&(list.splice(i,1),reserv_list.push(event),"function"==typeof event[fntag]&&event[fntag](_lastPos))}}}function execBinded(cid){if(bindList.hasOwnProperty(cid)){var _list=bindList[cid];for(var i in _list)_list[i](_lastPos,_direction)}}var _direction,_inited={},__id=0,_lastPos=0,doc=document.documentElement||document.body,doc1=document.body||document.documentElement,forwardList=[],backwardList=[],bindList={},nokey=0;exports.property=function(proname,container){switch(proname){case"height":return container?container.offsetHeight:doc.clientHeight;case"scrollTop":return getScrollTop(container)}},exports.unBind=function(factor,container){var cid=getUid(container||window),_list=bindList[cid];if("string"==typeof factor){var key=factor;void 0!=_list[key]&&delete _list[key]}else for(var key in _list)if(factor==_list[key]){delete _list[key];break}},exports.bind=function(factor,key,container){var cid=getUid(container||window);_inited.hasOwnProperty(cid)||initScrollWatch(cid,container),bindList[cid]=bindList[cid]||{};var _list=bindList[cid];key?_list[key]=factor:_list[nokey++]=factor},exports.yIn=function(yVal,gteFn,ltFn){_inited.hasOwnProperty(0)||initScrollWatch(0);var e={y:yVal,gteFn:gteFn,ltFn:ltFn,dynamicY:"function"==typeof yVal},y=e.dynamicY?e.y():e.y;_lastPos=getScrollTop(),y>_lastPos?forwardList.push(e):(backwardList.push(e),gteFn&&gteFn(_lastPos))}});
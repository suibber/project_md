define(function(require,exports){var pullUp_top,url,urlData,callback,scroll=require("./window-scroll"),pullUp=$(".pullUp"),win=$(window),win_h=win.height(),idDataLoad=!1,watchScroll=function(){idDataLoad=!1,pullUp.animate({opacity:1},400),$.get(url,urlData,function(res){pullUp.css("opacity",0),urlData.page++,idDataLoad=!0,callback(res)},"json")},scrollPoster=function(isscroll){function scrollPoster(pos,isDown){isDown&&(pullUp_top=pullUp[0].getBoundingClientRect().top,win_h>=pullUp_top-100&&idDataLoad&&watchScroll())}scroll.bind(scrollPoster,"scrollPoster")},startWatch=function(_url,urlParam,_callback,_pullUp){url=_url,urlParam["per-page"]||(urlParam["per-page"]=50),urlData=urlParam,callback=_callback,watchScroll(),scrollPoster()};exports.startWatch=startWatch});
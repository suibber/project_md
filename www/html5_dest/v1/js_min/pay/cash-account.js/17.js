define(function(require,exports){function withdraw(){$(".nav-item").eq(2).click(),duang.toast("提现中"),$.pageInitGet(api.gen("pay-withdraw"),{status:10},function(data){console.log(data),0==data.success?(duang.confirmClose(),duang.toast(data.message)):($sl.eq(2).prepend($sl.eq(0).html()),$sl.eq(0).empty(),$(".withdraw-btn").addClass("withdraw-btn-disable"),$nim.eq(2).text(+$nim.eq(2).text()+ +$nim.eq(0).text()),$nim.eq(0).text(0),$(".withdraw-tips-money").text(0),duang.confirmClose(),duang.toast(data.message))},"json")}require("zepto-ext");var tpl=require("../widget/tpl-engine"),api=require("../widget/api"),duang=require("../widget/duang"),balanceMoney=0,apiUrl="pay-account-event",$nsl=$(".no-settlement-list"),$nim=$(".nav-item-money"),$sl=$(".settlement-list");$nsl.css("top",$(".top").height()+$(".nav").height()+"px"),$sl.css("top",$(".top").height()+$(".nav").height()+"px"),miduoduo.user.id||location.replace(window.miduoduo.basePath.base+"view/user/login.html"),$.pageInitGet(api.gen(apiUrl),{status:0},function(data){data.money.money_balance>0&&$(".withdraw-btn").removeClass("withdraw-btn-disable"),$(".top-total-income").text(data.money.money_all),$(".withdraw-tips-money").text("￥"+data.money.money_balance),balanceMoney=data.money.money_balance,$nim.eq(0).text(data.money.money_balance),$nim.eq(1).text(data.money.money_doing),$nim.eq(2).text(data.money.money_success),$sl.eq(0).append(tpl.parse("settlement-list-tpl",{list:data.data})),0==data.data.length&&$nsl.show()}),$(".nav-item").on("click",function(){$(this).addClass("nav-item-act").siblings().removeClass("nav-item-act"),$nim.removeClass("nav-item-money-act"),$nim.eq($(this).index()).addClass("nav-item-money-act"),$sl.removeClass("settlement-list-act"),$sl.eq($(this).index()).addClass("settlement-list-act")}),$(".js-nav-item-balance").on("click",function(){0==$sl.eq(0).find("div").length?$nsl.show():$nsl.hide()}),$(".js-nav-item-doing").on("click",function(){}),$(".js-nav-item-success").on("click",function(){0==$sl.eq(2).find("div").length&&$.pageInitGet(api.gen(apiUrl),{status:3},function(data){0==data.data.length?$nsl.show():$nsl.hide(),$sl.eq(2).append(tpl.parse("settlement-list-tpl",{list:data.data}))})}),$(".withdraw-btn").on("click",function(){if(!$(this).hasClass("withdraw-btn-disable")){if(10>balanceMoney)return void duang.toast("提款失败，提款金额不能小于10元！");var confrimDescHtml="米多多使用“微信支付”作为唯一资金结算方式，我们将转账到您<span style='color:#ff7b5d'>目前登录的微信账号</span>钱包内，方便您24小时内转账到银行卡。<a href='"+miduoduo.basePath.base+"view/pay/wechat-withdraw-info.html' style='color:#3388ff'>查看提现教程 ></a>",titleHtml="您的可提现金额为：<span style='color:#ff612a'>"+balanceMoney+"元</span>";duang.confirm({title:titleHtml,desc:confrimDescHtml,leftBtnFn:duang.confirmClose,rightBtnFn:withdraw,leftBtnName:"取消",rightBtnName:"确认提现"})}})});